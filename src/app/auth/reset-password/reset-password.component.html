<div class="reset-password-container">
  <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
  <h2>{{ 'auth.resetPasswordTitle' | translate }}</h2>

  <!-- âœ… Ð¯ÐºÑ‰Ð¾ Ñ‚Ð¾ÐºÐµÐ½ Ð²Ð°Ð»Ñ–Ð´Ð½Ð¸Ð¹ -->
  <ng-container *ngIf="validToken; else invalidTokenBlock">

    <!-- âœ… ÐŸÐ¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð¿Ñ€Ð¾ ÑƒÑÐ¿Ñ–ÑˆÐ½Ðµ ÑÐºÐ¸Ð´Ð°Ð½Ð½Ñ -->
    <div *ngIf="successMessage" class="success-message">
      {{ successMessage | translate:{ email: successEmail } }}
    </div>

    <!-- ðŸ”˜ ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ñƒ Ð´Ð¾ Ð»Ð¾Ð³Ñ–Ð½Ñƒ -->
    <div *ngIf="successMessage" class="auth-links" style="margin-top: 20px; text-align: center;">
      <app-button (click)="goToLogin()">
        {{ 'auth.backToLogin' | translate }}
      </app-button>
    </div>

    <!-- ðŸ“‹ Ð¤Ð¾Ñ€Ð¼Ð° -->
    <form *ngIf="!successMessage" [formGroup]="resetPasswordForm" (ngSubmit)="resetPassword()">

      <!-- ðŸ” ÐÐ¾Ð²Ð¸Ð¹ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ -->
      <app-input
        formControlName="newPassword"
        [label]="'auth.newPassword' | translate"
        [placeholder]="'auth.passwordPlaceholder' | translate"
        type="password"
        [isInvalid]="submitted && f.newPassword.invalid"
      ></app-input>
      <div *ngIf="submitted && f.newPassword.invalid" class="error-message">
        <span *ngIf="f.newPassword.errors?.['required']">
          {{ 'auth.passwordRequired' | translate }}
        </span>
        <span *ngIf="f.newPassword.errors?.['minlength']">
          {{ 'auth.passwordTooShort' | translate }}
        </span>
      </div>

      <!-- ðŸ” ÐŸÑ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ Ð¿Ð°Ñ€Ð¾Ð»Ñ -->
      <app-input
        formControlName="confirmPassword"
        [label]="'auth.confirmPasswordLabel' | translate"
        [placeholder]="'auth.confirmPasswordPlaceholder' | translate"
        type="password"
        [isInvalid]="submitted && f.confirmPassword.invalid"
      ></app-input>
      <div *ngIf="submitted && f.confirmPassword.invalid" class="error-message">
        {{ 'auth.confirmPasswordRequired' | translate }}
      </div>

      <!-- âŒ ÐŸÐ¾Ð¼Ð¸Ð»ÐºÐ° -->
      <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage | translate }}
      </div>

      <!-- ðŸ”˜ ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ -->
      <app-button
        type="submit"
        [disabled]="resetPasswordForm.invalid || loading"
        [loading]="loading"
      >
        {{ 'auth.resetPasswordBtn' | translate }}
      </app-button>
    </form>
  </ng-container>

  <!-- âŒ Ð¯ÐºÑ‰Ð¾ Ñ‚Ð¾ÐºÐµÐ½ Ð½ÐµÐ´Ñ–Ð¹ÑÐ½Ð¸Ð¹ -->
  <ng-template #invalidTokenBlock>
    <div class="error-message">
      {{ 'auth.invalidResetToken' | translate }}
    </div>

    <div class="info-message">
      {{ 'auth.redirectingToReset' | translate:{ seconds: 10 } }}
    </div>

    <div class="auth-links">
      <a routerLink="/auth/forgot-password">
        {{ 'auth.tryResetAgain' | translate }}
      </a>
    </div>
  </ng-template>
</div>
